<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Projects — Maria Patni</title>
  <meta name="description" content="Projects of Maria Patni — robotics engineer." />
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" data-route="/styles.css">
  <style>
    :root {
      --bg: #f6f2e9;
      --fg: #1b4332;
      --muted: #406a5b;
      --rule: #d6d0c4;
      --link: #0f5132;
      --maxw: 880px;
    }
    body {
      margin: 0;
      font-family: 'Fira Code', monospace;
      background: var(--bg);
      color: var(--fg);
      line-height: 1.6;
    }
    a { color: var(--link); text-decoration: underline; }
    .container { max-width: 800px; margin: 0 auto; padding: 20px 20px 20px 100px; }

    .page-title { font-size: 2rem; margin: 10px 0 4px; }
    .subtitle { color: var(--muted); margin: 0 0 20px; }

    footer {
      display: flex; justify-content: space-around;
      border-top: 1px solid var(--rule);
      margin-top: 40px; padding: 20px 0;
    }
  </style>
</head>
<body>
  <div class="container">

    <!-- Top Navigation Bar -->
    <section class="masthead" style="position: relative;">
      <div data-layout="nav"></div>
    </section>
    
    <h1 class="page-title">Projects</h1>
    <p class="subtitle">things I've built + other fun stuff</p>

    <section class="project-grid" aria-label="Project tiles">
      <template id="project-card-template">
        <article class="project-card">
          <div class="project-card__image" role="presentation"></div>
          <div class="project-card__text">
            <h2 class="project-card__title"></h2>
            <p class="project-card__description"></p>
          </div>
          <div class="project-card__tags" aria-label="Project tags"></div>
        </article>
      </template>
      <div id="projectGrid"></div>
    </section>

    <div data-layout="footer"></div>
  </div>
  <script src="menu.js"></script>
  <script>
    async function renderProjectsFromJson() {
      const grid = document.getElementById('projectGrid');
      if (!grid) return;

      try {
        const response = await fetch('projects-data.json');
        if (!response.ok) {
          throw new Error(`Failed to load projects-data.json (${response.status})`);
        }
        const projects = await response.json();
        const template = document.getElementById('project-card-template');
        projects.forEach((project) => {
          const clone = template.content.cloneNode(true);
          const image = clone.querySelector('.project-card__image');
          if (project.coverPath) {
            image.style.backgroundImage = `url('${project.coverPath}')`;
          }
          clone.querySelector('.project-card__title').textContent = project.title;
          const descriptionEl = clone.querySelector('.project-card__description');
          const descriptionText = (project.description?.trim() || 'Description coming soon.')
            .replace(/(Edit:[\s\S]*)$/, '<span class="project-card__edit">$1</span>');
          descriptionEl.innerHTML = descriptionText;
          const tagsEl = clone.querySelector('.project-card__tags');
          const tags = Array.isArray(project.tags) ? project.tags : [];
          if (tags.length) {
            tagsEl.innerHTML = '';
            tags.forEach(tag => {
              const chip = document.createElement('span');
              chip.className = 'project-card__tag';
              chip.textContent = tag;
              tagsEl.appendChild(chip);
            });
          } else {
            tagsEl.remove();
          }
          const card = clone.querySelector('.project-card');
          if (project.url) {
            const link = document.createElement('a');
            link.className = 'project-card-link';
            link.href = project.url;
            link.setAttribute('target', '_self');
            link.setAttribute('rel', 'noopener');
            link.appendChild(card);
            grid.appendChild(link);
          } else {
            grid.appendChild(card);
          }
        });
      } catch (error) {
        console.error('Unable to render projects:', error);
        grid.innerHTML = '<p>Projects will be available soon. Check back later.</p>';
      }
    }

    document.addEventListener('DOMContentLoaded', renderProjectsFromJson);
  </script>
</body>
</html>

